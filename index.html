<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>microscope</title>
<style>
  :root{
    --accent:#ff8a00;                 /* オレンジ系アクセント */
    --panel:rgba(255,255,255,.06);
    --border:rgba(255,255,255,.14);
    --hint-size:clamp(18px,3.6vw,28px);
    --cmd-size:clamp(18px,3.8vw,24px);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;color:#fff;
    font-family:system-ui,-apple-system,"Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif}
  body{
    background:
      radial-gradient(1100px 550px at 10% -10%, #60a5fa22, transparent 60%),
      radial-gradient(900px 450px at 110% 0%, #a78bfa22, transparent 60%),
      radial-gradient(600px 600px at 50% 120%, #22d3ee20, transparent 60%),
      linear-gradient(#0b1220,#0e172a 40%,#111827);
    overflow:hidden;
  }
  .screen{position:fixed; inset:0; display:none;}
  .screen.show{display:block;}

  /* 共通レイアウト */
  .stage{
    position:absolute; inset:0; display:grid; place-items:center; padding:16px;
  }
  .frame{
    width:min(980px,96vw); aspect-ratio:16/9; border-radius:18px;
    border:1px solid var(--border); background:var(--panel); backdrop-filter:blur(6px);
    position:relative; overflow:hidden;
  }

  /* 1画面目：イラスト無し、雰囲気だけのカラー装飾 */
  .color-clouds{
    position:absolute; inset:0; pointer-events:none; opacity:.9;
    background:
      radial-gradient(600px 420px at 20% 30%, #48d1cc33, transparent 60%),
      radial-gradient(520px 360px at 80% 25%, #ff9bd433, transparent 60%),
      radial-gradient(520px 360px at 60% 75%, #7dd3fc33, transparent 60%);
    filter: blur(2px);
  }

  /* 2画面目：視野（丸）だけ表示。カラーで幻想的に */
  .view-wrap{position:absolute; inset:0; display:grid; place-items:center;}
  .view{
    width:min(90vmin,820px); aspect-ratio:1/1; border-radius:50%;
    background:
      radial-gradient(circle at 50% 50%, #ffffff0f 0 40%, #00000099 98%, #000 100%),
      conic-gradient(from 210deg, #5eead4 0 20%, #a78bfa 20% 40%, #60a5fa 40% 60%, #f472b6 60% 80%, #22d3ee 80% 100%);
    box-shadow:0 0 0 6px #000, 0 0 36px #00e3ff44, inset 0 0 80px #000;
    position:relative; overflow:hidden;
  }

  /* 画面下のテキスト＆コマンド（□かこみ） */
  .bottom{
    position:absolute; left:0; right:0; bottom: max(16px, env(safe-area-inset-bottom));
    display:grid; justify-items:center; gap:12px; padding:0 16px;
  }
  .hint{font-weight:800; font-size:var(--hint-size); text-shadow:0 2px 10px #0009}
  .cmd{
    font-weight:900; font-size:var(--cmd-size); letter-spacing:.03em;
    padding:.9em 1.4em; border:2px solid #fff; background:transparent; color:#fff;
    border-radius:14px; cursor:pointer; outline:none;
    box-shadow:0 2px 14px #0006;
  }
  .cmd:active{transform:translateY(1px); opacity:.9}

  /* 小さめ画面の調整 */
  @media (max-width:680px){
    .frame{border-radius:14px}
  }
</style>
</head>
<body>

<!-- 画面1：下に「顕微鏡に何かが見えるよ？」＋「顕微鏡をのぞいてみる」 -->
<section id="s1" class="screen show">
  <div class="stage">
    <div class="frame">
      <div class="color-clouds"></div>
      <div class="bottom">
        <div class="hint">顕微鏡に何かが見えるよ？</div>
        <button id="toView" class="cmd" type="button">顕微鏡をのぞいてみる</button>
      </div>
    </div>
  </div>
</section>

<!-- 画面2（視野）：下に「妖精がなにか言っているよ」＋「聞いてみる」 -->
<section id="s2" class="screen">
  <div class="stage">
    <div class="frame">
      <div class="view-wrap">
        <div class="view" aria-label="顕微鏡の視野（カラー）"></div>
      </div>
      <div class="bottom">
        <div class="hint">妖精がなにか言っているよ</div>
        <button id="listen" class="cmd" type="button">聞いてみる</button>
      </div>
    </div>
  </div>
</section>

<!-- 再生する音声（必要に応じてファイル名を変更） -->
<audio id="voice" preload="auto">
  <source src="正解.m4a" type="audio/mp4"/>
  <!-- 予備：別名を使うなら下の行を生かしてファイルを置く
  <source src="voice.m4a" type="audio/mp4"/>
  <source src="voice.mp3" type="audio/mpeg"/>
  -->
</audio>

<script>
  const s1 = document.getElementById('s1');
  const s2 = document.getElementById('s2');
  const toViewBtn = document.getElementById('toView');
  const listenBtn = document.getElementById('listen');
  const voice = document.getElementById('voice');

  // 1画面目 → 2画面目へ（ボタンクリックで遷移）
  toViewBtn.addEventListener('click', () => {
    s1.classList.remove('show');
    s2.classList.add('show');
    // もし別ページへ遷移したい場合は、ここを location.href = 'next.html' に変更
  });

  // 「聞いてみる」→ 音声を再生（iOS対応：ユーザー操作直後のplay）
  listenBtn.addEventListener('click', () => {
    try {
      voice.currentTime = Math.max(0, voice.currentTime); // 「再開」ニュアンス
      voice.play().catch(()=>{ /* 無音でも落ちない */ });
    } catch(e) {}
  });

  // 任意：エスケープで停止
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') try { voice.pause(); } catch(e){}
  });
</script>
</body>
</html>
