<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>microscope</title>
<style>
  :root{
    --panel:rgba(255,255,255,.06);
    --border:rgba(255,255,255,.14);
    --hint-size:clamp(18px,3.6vw,28px);
    --cmd-size:clamp(18px,3.8vw,24px);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;color:#fff;
    font-family:system-ui,-apple-system,"Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif}
  body{
    background:
      radial-gradient(1100px 550px at 10% -10%, #60a5fa22, transparent 60%),
      radial-gradient(900px 450px at 110% 0%, #a78bfa22, transparent 60%),
      radial-gradient(600px 600px at 50% 120%, #22d3ee20, transparent 60%),
      linear-gradient(#0b1220,#0e172a 40%,#111827);
    overflow:hidden;
  }
  .screen{position:fixed; inset:0; display:none;}
  .screen.show{display:block;}

  .stage{position:absolute; inset:0; display:grid; place-items:center; padding:16px;}
  .frame{
    width:min(980px,96vw); aspect-ratio:16/9; border-radius:18px;
    border:1px solid var(--border); background:var(--panel); backdrop-filter:blur(6px);
    position:relative; overflow:hidden; display:grid; place-items:center;
    padding:16px;
  }

  /* 顕微鏡写真を中央に大きく（最優先） */
  .scope-photo{
    max-width:92%; max-height:78%;
    object-fit:contain; display:block; margin:auto;
    filter: drop-shadow(0 8px 18px #0008);
  }

  /* 画面下のテキスト＆コマンド（□かこみ） */
  .bottom{
    position:absolute; left:0; right:0; bottom:max(16px, env(safe-area-inset-bottom));
    display:grid; justify-items:center; gap:12px; padding:0 16px;
  }
  .hint{font-weight:800; font-size:var(--hint-size); text-shadow:0 2px 10px #0009}
  .cmd{
    font-weight:900; font-size:var(--cmd-size); letter-spacing:.03em;
    padding:.9em 1.4em; border:2px solid #fff; background:transparent; color:#fff;
    border-radius:14px; cursor:pointer; outline:none;
    box-shadow:0 2px 14px #0006;
  }
  .cmd:active{transform:translateY(1px); opacity:.9}

  /* 2画面目：視野（丸）だけ表示 */
  .view-wrap{position:absolute; inset:0; display:grid; place-items:center;}
  .view{
    width:min(90vmin,820px); aspect-ratio:1/1; border-radius:50%;
    background:
      radial-gradient(circle at 50% 50%, #ffffff0f 0 40%, #00000099 98%, #000 100%),
      conic-gradient(from 210deg, #5eead4 0 20%, #a78bfa 20% 40%, #60a5fa 40% 60%, #f472b6 60% 80%, #22d3ee 80% 100%);
    box-shadow:0 0 0 6px #000, 0 0 36px #00e3ff44, inset 0 0 80px #000;
  }
</style>
</head>
<body>

<!-- 画面1：中央に顕微鏡画像、下部にテキストとコマンド -->
<section id="s1" class="screen show">
  <div class="stage">
    <div class="frame">
      <!-- 顕微鏡画像：ファイル名「顕微鏡」 を拡張子違いで順番に試す -->
      <img id="scope" class="scope-photo" alt="顕微鏡">

      <div class="bottom">
        <div class="hint">顕微鏡に何かが見えるよ？</div>
        <button id="toView" class="cmd" type="button">顕微鏡をのぞいてみる</button>
      </div>
    </div>
  </div>
</section>

<!-- 画面2（視野）：下部テキスト＋「聞いてみる」 -->
<section id="s2" class="screen">
  <div class="stage">
    <div class="frame">
      <div class="view-wrap"><div class="view" aria-label="顕微鏡の視野（カラー）"></div></div>
      <div class="bottom">
        <div class="hint">妖精がなにか言っているよ</div>
        <button id="listen" class="cmd" type="button">聞いてみる</button>
      </div>
    </div>
  </div>
</section>

<audio id="voice" preload="auto">
  <source src="正解.m4a" type="audio/mp4"/>
</audio>

<script>
  // 画像「顕微鏡.*」を拡張子の候補で順番に試す（.png / .jpg / .jpeg / .webp / .png.png）
  (function(){
    const img = document.getElementById('scope');
    const candidates = ["顕微鏡.png","顕微鏡.jpg","顕微鏡.jpeg","顕微鏡.webp","顕微鏡.png.png"];
    let i = 0;
    const next = () => {
      img.onerror = () => { if(++i < candidates.length) next(); };
      img.src = candidates[i];
    };
    next();
  })();

  const s1 = document.getElementById('s1');
  const s2 = document.getElementById('s2');
  const toViewBtn = document.getElementById('toView');
  const listenBtn = document.getElementById('listen');
  const voice = document.getElementById('voice');

  toViewBtn.addEventListener('click', () => {
    s1.classList.remove('show');
    s2.classList.add('show');
  });

  listenBtn.addEventListener('click', () => {
    try { voice.currentTime = Math.max(0, voice.currentTime); voice.play(); } catch(e){}
  });
</script>
</body>
</html>
